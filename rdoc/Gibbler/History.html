<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=US-ASCII" http-equiv="Content-Type">

<title>module Gibbler::History - gibbler 0.9.0</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/gibbler/aliases.rb
    <li>lib/gibbler/history.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-mutex">::mutex</a>
    
    <li><a href="#method-i-commit">#commit</a>
    
    <li><a href="#method-i-find_long">#find_long</a>
    
    <li><a href="#method-i-gibbler_commit">#gibbler_commit</a>
    
    <li><a href="#method-i-gibbler_find_long">#gibbler_find_long</a>
    
    <li><a href="#method-i-gibbler_history">#gibbler_history</a>
    
    <li><a href="#method-i-gibbler_history-3F">#gibbler_history?</a>
    
    <li><a href="#method-i-gibbler_object">#gibbler_object</a>
    
    <li><a href="#method-i-gibbler_revert-21">#gibbler_revert!</a>
    
    <li><a href="#method-i-gibbler_stamp">#gibbler_stamp</a>
    
    <li><a href="#method-i-gibbler_valid-3F">#gibbler_valid?</a>
    
    <li><a href="#method-i-history">#history</a>
    
    <li><a href="#method-i-history-3F">#history?</a>
    
    <li><a href="#method-i-object">#object</a>
    
    <li><a href="#method-i-revert-21">#revert!</a>
    
    <li><a href="#method-i-stamp">#stamp</a>
    
    <li><a href="#method-i-valid-3F">#valid?</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../LICENSE_txt.html">LICENSE</a>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Gibbler.html">Gibbler</a>
  
    <li><a href="../Gibbler/Array.html">Gibbler::Array</a>
  
    <li><a href="../Gibbler/BadDigest.html">Gibbler::BadDigest</a>
  
    <li><a href="../Gibbler/Complex.html">Gibbler::Complex</a>
  
    <li><a href="../Gibbler/DateTime.html">Gibbler::DateTime</a>
  
    <li><a href="../Gibbler/Digest.html">Gibbler::Digest</a>
  
    <li><a href="../Gibbler/Digest/InstanceMethods.html">Gibbler::Digest::InstanceMethods</a>
  
    <li><a href="../Gibbler/Error.html">Gibbler::Error</a>
  
    <li><a href="../Gibbler/File.html">Gibbler::File</a>
  
    <li><a href="../Gibbler/Hash.html">Gibbler::Hash</a>
  
    <li><a href="../Gibbler/History.html">Gibbler::History</a>
  
    <li><a href="../Gibbler/Nil.html">Gibbler::Nil</a>
  
    <li><a href="../Gibbler/NoHistory.html">Gibbler::NoHistory</a>
  
    <li><a href="../Gibbler/NoRevert.html">Gibbler::NoRevert</a>
  
    <li><a href="../Gibbler/Object.html">Gibbler::Object</a>
  
    <li><a href="../Gibbler/Range.html">Gibbler::Range</a>
  
    <li><a href="../Gibbler/String.html">Gibbler::String</a>
  
    <li><a href="../Gibbler/Time.html">Gibbler::Time</a>
  
    <li><a href="../Gibbler/VERSION.html">Gibbler::VERSION</a>
  
    <li><a href="../Addressable.html">Addressable</a>
  
    <li><a href="../Addressable/URI.html">Addressable::URI</a>
  
    <li><a href="../Gem.html">Gem</a>
  
    <li><a href="../Gem/Platform.html">Gem::Platform</a>
  
    <li><a href="../URI.html">URI</a>
  
    <li><a href="../URI/Generic.html">URI::Generic</a>
  
    <li><a href="../Array.html">Array</a>
  
    <li><a href="../Bignum.html">Bignum</a>
  
    <li><a href="../Class.html">Class</a>
  
    <li><a href="../Date.html">Date</a>
  
    <li><a href="../DateTime.html">DateTime</a>
  
    <li><a href="../FalseClass.html">FalseClass</a>
  
    <li><a href="../File.html">File</a>
  
    <li><a href="../Fixnum.html">Fixnum</a>
  
    <li><a href="../Float.html">Float</a>
  
    <li><a href="../Hash.html">Hash</a>
  
    <li><a href="../MatchData.html">MatchData</a>
  
    <li><a href="../Module.html">Module</a>
  
    <li><a href="../NilClass.html">NilClass</a>
  
    <li><a href="../Object.html">Object</a>
  
    <li><a href="../OpenStruct.html">OpenStruct</a>
  
    <li><a href="../Proc.html">Proc</a>
  
    <li><a href="../Range.html">Range</a>
  
    <li><a href="../Regexp.html">Regexp</a>
  
    <li><a href="../String.html">String</a>
  
    <li><a href="../Symbol.html">Symbol</a>
  
    <li><a href="../TempFile.html">TempFile</a>
  
    <li><a href="../Time.html">Time</a>
  
    <li><a href="../TrueClass.html">TrueClass</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Gibbler::History</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-mutex" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mutex</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="mutex-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mutex</span>; <span class="ruby-identifier">@@mutex</span>; <span class="ruby-keyword">end</span></pre>
          </div><!-- mutex-source -->
          
        </div>

        

        
      </div><!-- mutex-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-commit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">commit</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="commit-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">commit</span>; <span class="ruby-identifier">gibbler_commit</span>; <span class="ruby-keyword">end</span></pre>
          </div><!-- commit-source -->
          
        </div>

        

        
      </div><!-- commit-method -->

    
      <div id="method-i-find_long" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_long</span><span
            class="method-args">(*args, &b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="find_long-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_long</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-identifier">gibbler_find_long</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-keyword">end</span></pre>
          </div><!-- find_long-source -->
          
        </div>

        

        
      </div><!-- find_long-method -->

    
      <div id="method-i-gibbler_commit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_commit</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Stores a clone of the current object instance using the current digest
value. If the object was not changed, this method does nothing but return
the gibble.</p>

<p>NOTE: This method is not fully thread safe. It uses a Mutex.synchronize but
there's a race condition where two threads can attempt to commit at  near
the same time. The first will get the lock and create the commit.  The
second will get the lock and create another commit immediately  after. What
we probably want is for the second thread to return the  digest for that
first snapshot, but how do we know this was a result of the race conditioon
rather than two legitimate calls for a snapshot?</p>
          

          
          <div class="method-source-code" id="gibbler_commit-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_commit</span>
  <span class="ruby-identifier">now</span>, <span class="ruby-identifier">digest</span>, <span class="ruby-identifier">point</span> = <span class="ruby-keyword">nil</span>,<span class="ruby-keyword">nil</span>,<span class="ruby-keyword">nil</span>
  
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">@@mutex</span>.<span class="ruby-identifier">synchronize</span> {
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span> <span class="ruby-operator">||=</span> { <span class="ruby-value">:history</span> =<span class="ruby-operator">&gt;</span> [], <span class="ruby-value">:objects</span> =<span class="ruby-operator">&gt;</span> {}, <span class="ruby-value">:stamp</span> =<span class="ruby-operator">&gt;</span> {} }
    }
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">@@mutex</span>.<span class="ruby-identifier">synchronize</span> {
    <span class="ruby-identifier">now</span>, <span class="ruby-identifier">digest</span>, <span class="ruby-identifier">point</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gibbler</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">clone</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>[<span class="ruby-value">:history</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">digest</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>[<span class="ruby-value">:stamp</span>][<span class="ruby-identifier">digest</span>] = <span class="ruby-identifier">now</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>[<span class="ruby-value">:objects</span>][<span class="ruby-identifier">digest</span>] = <span class="ruby-identifier">point</span>
  }
  
  <span class="ruby-identifier">digest</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_commit-source -->
          
        </div>

        

        
      </div><!-- gibbler_commit-method -->

    
      <div id="method-i-gibbler_find_long" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_find_long</span><span
            class="method-args">(g)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns the long digest associated to the short digest <code>g</code>. If g
is longer than 8 characters it returns the value of <code>g</code>.</p>
          

          
          <div class="method-source-code" id="gibbler_find_long-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_find_long</span>(<span class="ruby-identifier">g</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">g</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">8</span>
  <span class="ruby-identifier">gibbler_history</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">match</span> <span class="ruby-node">%r\A#{g}/</span> }.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_find_long-source -->
          
        </div>

        

        
      </div><!-- gibbler_find_long-method -->

    
      <div id="method-i-gibbler_history" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_history</span><span
            class="method-args">(short=false)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns an <a href="Array.html">Array</a> of digests in the order they were
committed.  If <code>short</code> is anything but false, the digests will
be converted to the short 8 character digests.</p>
          

          
          <div class="method-source-code" id="gibbler_history-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 27</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_history</span>(<span class="ruby-identifier">short</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-comment"># Only a single thread should attempt to initialize the store.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">@@mutex</span>.<span class="ruby-identifier">synchronize</span> {
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span> <span class="ruby-operator">||=</span> { <span class="ruby-value">:history</span> =<span class="ruby-operator">&gt;</span> [], <span class="ruby-value">:objects</span> =<span class="ruby-operator">&gt;</span> {}, <span class="ruby-value">:stamp</span> =<span class="ruby-operator">&gt;</span> {} }
    }
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">short</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>[<span class="ruby-value">:history</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>[<span class="ruby-value">:history</span>].<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">short</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_history-source -->
          
        </div>

        

        
      </div><!-- gibbler_history-method -->

    
      <div id="method-i-gibbler_history-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_history?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Does the current object have any history?</p>
          

          
          <div class="method-source-code" id="gibbler_history-3F-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_history?</span>
  <span class="ruby-operator">!</span><span class="ruby-identifier">gibbler_history</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_history-3F-source -->
          
        </div>

        

        
      </div><!-- gibbler_history-3F-method -->

    
      <div id="method-i-gibbler_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_object</span><span
            class="method-args">(g=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns the object stored under the given digest <code>g</code>. If
<code>g</code> is not a valid digest, returns nil.</p>
          

          
          <div class="method-source-code" id="gibbler_object-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_object</span>(<span class="ruby-identifier">g</span>=<span class="ruby-keyword">nil</span>) 
  <span class="ruby-identifier">g</span> = <span class="ruby-identifier">gibbler_find_long</span> <span class="ruby-identifier">g</span>
  <span class="ruby-identifier">g</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gibbler_history</span>.<span class="ruby-identifier">last</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gibbler_valid?</span> <span class="ruby-identifier">g</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>[<span class="ruby-value">:objects</span>][ <span class="ruby-identifier">g</span> ]
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_object-source -->
          
        </div>

        

        
      </div><!-- gibbler_object-method -->

    
      <div id="method-i-gibbler_revert-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_revert!</span><span
            class="method-args">(g=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Revert this object to a previously known state. If called without arguments
it will revert to the most recent commit. If a digest is specified
<code>g</code>, it will revert to that point.</p>

<p>Ruby does not support replacing self (<code>self = previous_self</code>) so
each  object type needs to implement its own __gibbler_revert! method. This
default run some common checks and then defers to self.__gibbler_revert!.</p>

<p>Raise the following exceptions:</p>
<ul><li>
<p>NoRevert: if this object doesn't have a __gibbler_revert! method</p>
</li><li>
<p>NoHistory: This object has no commits</p>
</li><li>
<p>BadDigest: The given digest is not in the history for this object</p>
</li></ul>

<p>If <code>g</code> matches the current digest value this method does
nothing.</p>

<p>Returns the new digest (<code>g</code>).</p>
          

          
          <div class="method-source-code" id="gibbler_revert-21-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_revert!</span>(<span class="ruby-identifier">g</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoRevert</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:__gibbler_revert!</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoHistory</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gibbler_history?</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">BadDigest</span>, <span class="ruby-identifier">g</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">g</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">gibbler_valid?</span>(<span class="ruby-identifier">g</span>)
  
  <span class="ruby-identifier">g</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gibbler_history</span>.<span class="ruby-identifier">last</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">g</span> = <span class="ruby-identifier">gibbler_find_long</span> <span class="ruby-identifier">g</span> 
  
  <span class="ruby-comment"># Do nothing if the given digest matches the current gibble. </span>
  <span class="ruby-comment"># NOTE: We use __gibbler b/c it doesn't update self.gibbler_cache.</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">g</span>
    <span class="ruby-identifier">@@mutex</span>.<span class="ruby-identifier">synchronize</span> {
      <span class="ruby-comment"># Always make sure self.gibbler_digest is a Gibbler::Digest </span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gibbler_cache</span> = <span class="ruby-identifier">g</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Gibbler</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">g</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Gibbler</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">g</span>)
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_revert!</span>
    }
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gibbler_cache</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_revert-21-source -->
          
        </div>

        

        
      </div><!-- gibbler_revert-21-method -->

    
      <div id="method-i-gibbler_stamp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_stamp</span><span
            class="method-args">(g=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns the timestamp (a <a href="Time.html">Time</a> object) when the
digest <code>g</code> was committed.  If <code>g</code> is not a valid
gibble, returns nil.</p>
          

          
          <div class="method-source-code" id="gibbler_stamp-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 53</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_stamp</span>(<span class="ruby-identifier">g</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">g</span> = <span class="ruby-identifier">gibbler_find_long</span> <span class="ruby-identifier">g</span>
  <span class="ruby-identifier">g</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gibbler_history</span>.<span class="ruby-identifier">last</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gibbler_valid?</span> <span class="ruby-identifier">g</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__gibbler_history</span>[<span class="ruby-value">:stamp</span>][ <span class="ruby-identifier">g</span> ]
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_stamp-source -->
          
        </div>

        

        
      </div><!-- gibbler_stamp-method -->

    
      <div id="method-i-gibbler_valid-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gibbler_valid?</span><span
            class="method-args">(g)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Is the given digest <code>g</code> contained in the history for this
object?</p>
          

          
          <div class="method-source-code" id="gibbler_valid-3F-source">
            <pre><span class="ruby-comment"># File lib/gibbler/history.rb, line 128</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gibbler_valid?</span>(<span class="ruby-identifier">g</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gibbler_history?</span>
  <span class="ruby-identifier">gibbler_history</span>.<span class="ruby-identifier">member?</span> <span class="ruby-identifier">gibbler_find_long</span>(<span class="ruby-identifier">g</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- gibbler_valid-3F-source -->
          
        </div>

        

        
      </div><!-- gibbler_valid-3F-method -->

    
      <div id="method-i-history" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">history</span><span
            class="method-args">(*args, &b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="history-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">history</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-identifier">gibbler_history</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-keyword">end</span></pre>
          </div><!-- history-source -->
          
        </div>

        

        
      </div><!-- history-method -->

    
      <div id="method-i-history-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">history?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="history-3F-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 28</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">history?</span>; <span class="ruby-identifier">gibbler_history?</span>; <span class="ruby-keyword">end</span></pre>
          </div><!-- history-3F-source -->
          
        </div>

        

        
      </div><!-- history-3F-method -->

    
      <div id="method-i-object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">object</span><span
            class="method-args">(*args, &b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="object-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">object</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-identifier">gibbler_object</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-keyword">end</span></pre>
          </div><!-- object-source -->
          
        </div>

        

        
      </div><!-- object-method -->

    
      <div id="method-i-revert-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">revert!</span><span
            class="method-args">(*args, &b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="revert-21-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 27</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">revert!</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-identifier">gibbler_revert!</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-keyword">end</span></pre>
          </div><!-- revert-21-source -->
          
        </div>

        

        
      </div><!-- revert-21-method -->

    
      <div id="method-i-stamp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stamp</span><span
            class="method-args">(*args, &b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="stamp-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stamp</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-identifier">gibbler_stamp</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-keyword">end</span></pre>
          </div><!-- stamp-source -->
          
        </div>

        

        
      </div><!-- stamp-method -->

    
      <div id="method-i-valid-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">valid?</span><span
            class="method-args">(*args, &b)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="valid-3F-source">
            <pre><span class="ruby-comment"># File lib/gibbler/aliases.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">valid?</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-identifier">gibbler_valid?</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">b</span>); <span class="ruby-keyword">end</span></pre>
          </div><!-- valid-3F-source -->
          
        </div>

        

        
      </div><!-- valid-3F-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

